<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Journey Unbound â€“ Kink & Connection Checklist</title>
<style>
/* â”€â”€â”€ RESET & BASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { -webkit-text-size-adjust: 100%; }
body {
  font-family: 'Segoe UI', system-ui, sans-serif;
  color: #1E3A8A;
  background: #fff;
  -webkit-font-smoothing: antialiased;
  min-height: 100vh;
}
button { font-family: inherit; cursor: pointer; border: none; background: none; }
input  { font-family: inherit; }

/* â”€â”€â”€ BRAND TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  --purple:       #6B46C1;
  --peacock:      #0891B2;
  --turquoise:    #14B8A6;
  --pink:         #F472B6;
  --deep-blue:    #1E3A8A;
  --light-purple: #EDE9FE;
  --soft-pink:    #FDF2F8;
  --muted:        #6B7280;
  --border:       #E5E7EB;
  --red:          #EF4444;
  --orange:       #F97316;
}

/* â”€â”€â”€ INTRO SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#intro {
  min-height: 100vh;
  background: linear-gradient(150deg, var(--light-purple) 0%, #fff 45%, var(--soft-pink) 100%);
  display: flex; align-items: center; justify-content: center;
  padding: 24px;
}
#intro .inner { max-width: 600px; width: 100%; text-align: center; }
.intro-eyebrow {
  font-size: 13px; letter-spacing: 3.5px; text-transform: uppercase;
  color: var(--peacock); font-weight: 600; margin-bottom: 6px;
}
#intro h1 {
  font-family: Georgia, serif;
  font-size: 44px; color: var(--purple); line-height: 1.1; margin-bottom: 4px;
}
.intro-sub { font-size: 20px; color: var(--peacock); font-style: italic; margin-bottom: 28px; }
.intro-card {
  background: #fff; border-radius: 16px; padding: 28px;
  box-shadow: 0 4px 28px rgba(107,70,193,0.1);
  text-align: left; margin-bottom: 24px;
}
.intro-card p { color: var(--deep-blue); font-size: 14px; line-height: 1.7; margin-bottom: 18px; }
.intro-legend { background: var(--light-purple); border-radius: 10px; padding: 16px; margin-bottom: 14px; }
.intro-legend .legend-title {
  font-size: 11px; font-weight: 700; color: var(--purple);
  text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;
}
.intro-legend .legend-body { font-size: 11.5px; color: #4a5568; line-height: 2; }
.intro-blessing { color: var(--muted); font-size: 12px; font-style: italic; text-align: center; }
.mode-label { font-size: 13px; color: var(--deep-blue); font-weight: 600; margin-bottom: 10px; }
.mode-buttons { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
.mode-btn {
  background: #fff; border-radius: 12px; padding: 14px 22px;
  text-align: left; max-width: 240px; width: 100%; transition: box-shadow 0.2s;
}
.mode-btn:hover { box-shadow: 0 4px 20px rgba(107,70,193,0.2); }
.mode-btn.peacock { border: 2px solid var(--peacock); }
.mode-btn.purple  { border: 2px solid var(--purple); }
.mode-btn .btn-title { font-size: 15px; font-weight: 700; margin-bottom: 4px; }
.mode-btn.peacock .btn-title { color: var(--peacock); }
.mode-btn.purple  .btn-title { color: var(--purple); }
.mode-btn .btn-desc { font-size: 11px; color: var(--muted); line-height: 1.5; }

/* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#header {
  background: linear-gradient(135deg, var(--purple), var(--deep-blue));
  padding: 14px 18px; position: sticky; top: 0; z-index: 100;
  display: flex; align-items: center; justify-content: space-between;
  gap: 8px; flex-wrap: wrap;
}
.header-left .title { color: #fff; font-family: Georgia, serif; font-size: 18px; font-weight: 700; }
.header-left .mode-badge {
  color: rgba(255,255,255,0.5); font-size: 9px; margin-left: 10px;
  letter-spacing: 1px; text-transform: uppercase;
}
.header-btns { display: flex; gap: 6px; }
.header-btns button {
  background: rgba(255,255,255,0.12); color: #fff;
  border: 1px solid rgba(255,255,255,0.25); border-radius: 6px;
  padding: 5px 11px; font-size: 11px;
}
.header-btns button:hover { background: rgba(255,255,255,0.22); }

/* â”€â”€â”€ CATEGORY NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#cat-nav {
  background: #fff; border-bottom: 1px solid var(--border);
  overflow-x: auto; position: sticky; top: 52px; z-index: 90;
  -webkit-overflow-scrolling: touch;
}
#cat-nav .nav-inner { max-width: 860px; margin: 0 auto; display: flex; gap: 5px; padding: 10px 14px; }
.cat-btn {
  border-radius: 18px; padding: 5px 12px; font-size: 10.5px;
  white-space: nowrap; position: relative; transition: all 0.15s;
  background: transparent; color: var(--deep-blue); border: 1px solid var(--deep-blue);
}
.cat-btn.active { background: var(--purple); color: #fff; border-color: var(--purple); font-weight: 600; }
.cat-btn .badge {
  position: absolute; top: -5px; right: -5px;
  background: var(--pink); color: #fff;
  border-radius: 8px; font-size: 7.5px; font-weight: 700;
  padding: 1px 4px; min-width: 18px; text-align: center;
}
.cat-btn .badge.complete { background: var(--turquoise); }

/* â”€â”€â”€ STICKY LEGEND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#legend-sticky {
  background: #fff;
  border-bottom: 1px solid var(--border);
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
}
#legend-sticky .legend-inner {
  max-width: 860px; margin: 0 auto;
  display: flex; gap: 6px; flex-wrap: wrap; align-items: center;
  padding: 7px 14px; font-size: 9px; color: var(--muted);
}
.legend-section { display: flex; align-items: center; gap: 5px; }
.legend-section .legend-lbl { font-weight: 700; font-size: 8px; text-transform: uppercase; letter-spacing: 0.6px; color: var(--muted); margin-right: 2px; }
.legend-divider { width: 1px; height: 16px; background: var(--border); flex-shrink: 0; margin: 0 4px; }
/* rating pill in legend */
.legend-rating {
  display: inline-flex; align-items: center; gap: 3px;
  background: #f3f4f6; border-radius: 5px; padding: 2px 5px;
  font-size: 9px; color: var(--muted);
  transition: all 0.15s;
}
.legend-rating:hover { background: #e5e7eb; }
.legend-rating.active { background: var(--purple); color: #fff; font-weight: 600; }
.legend-rating.active .r-emoji { filter: brightness(1.2); }
.legend-rating .r-emoji { font-size: 11px; line-height: 1; }
/* limit swatch in legend */
.legend-limit { 
  display: inline-flex; align-items: center; gap: 3px; 
  font-size: 8.5px; font-weight: 600;
  padding: 2px 5px; border-radius: 5px;
  transition: all 0.15s;
}
.legend-limit:hover { background: #f3f4f6; }
.legend-limit.active { background: var(--purple); color: #fff; }
.legend-limit .swatch { width: 8px; height: 8px; border-radius: 2px; display: inline-block; }
/* need tag in legend */
.legend-need {
  display: inline-flex; align-items: center; gap: 3px;
  background: #f0fdfa; border: 1px solid var(--turquoise);
  border-radius: 10px; padding: 2px 7px;
  font-size: 8.5px; color: var(--turquoise); font-weight: 600;
}

/* fetish filter in legend */
.legend-fetish {
  display: inline-flex; align-items: center; gap: 3px;
  background: #f3f4f6; border-radius: 10px; padding: 2px 7px;
  font-size: 8.5px; font-weight: 600; color: var(--pink);
  transition: all 0.15s; cursor: pointer;
}
.legend-fetish:hover { background: #e5e7eb; }
.legend-fetish.active { background: var(--pink); color: #fff; }

/* â”€â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#main {
  max-width: 860px; margin: 0 auto; padding: 18px 14px 40px;
  min-height: calc(100vh - 140px);
}
.desc-card {
  background: #fff; border-radius: 10px; padding: 12px 16px;
  margin-bottom: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  border-left: 4px solid var(--turquoise);
  font-size: 12.5px; color: var(--deep-blue); line-height: 1.6;
}
.filter-row { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 14px; }
.filter-pill {
  background: #fff; color: var(--peacock);
  border: 1px solid var(--peacock); border-radius: 14px;
  padding: 3px 10px; font-size: 10px; transition: all 0.15s;
}
.filter-pill.active { background: var(--peacock); color: #fff; font-weight: 600; }
.group-heading {
  font-size: 10px; font-weight: 700; color: var(--purple);
  text-transform: uppercase; letter-spacing: 1px; margin: 18px 0 7px 2px;
}
.group-heading:first-child { margin-top: 0; }

/* â”€â”€â”€ ITEM CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.item-card {
  background: #fff; border-radius: 10px; margin-bottom: 6px;
  border: 1px solid var(--border); transition: border 0.2s;
}
.item-card.touched { border-width: 2px; border-color: var(--purple); }
.card-top {
  display: flex; align-items: center; justify-content: space-between;
  padding: 9px 12px 6px; gap: 8px;
}
/* item name + tooltip wrapper */
.item-name-wrap { position: relative; flex: 1; display: inline-flex; align-items: center; gap: 5px; }
.item-name { font-size: 13px; color: var(--deep-blue); font-weight: 500; }
.item-name.has-tip { border-bottom: 1px dotted var(--peacock); cursor: help; padding-bottom: 1px; }
/* tooltip */
.tooltip {
  display: none; position: absolute; left: 0; top: calc(100% + 6px);
  background: var(--deep-blue); color: #fff; font-size: 11px; line-height: 1.5;
  padding: 8px 11px; border-radius: 7px; max-width: 260px; width: max-content;
  z-index: 50; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  pointer-events: none;
}
.tooltip::before {
  content: ''; position: absolute; top: -5px; left: 16px;
  width: 10px; height: 10px; background: var(--deep-blue);
  transform: rotate(45deg);
}
.item-name-wrap:hover .tooltip { display: block; }
/* keep tooltip on screen if near right edge */
@media (max-width: 500px) { .tooltip { max-width: 200px; } }

.fetish-btn {
  background: #f3f4f6; border-radius: 6px; padding: 2px 7px;
  font-size: 9px; font-weight: 700; color: var(--muted); transition: all 0.15s; flex-shrink: 0;
}
.fetish-btn.on { background: var(--pink); color: #fff; }
.card-row { display: flex; gap: 12px; padding: 0 12px; flex-wrap: wrap; }
.card-row + .card-row { padding-top: 6px; }
.lbl-sm {
  font-size: 9px; color: var(--muted); text-transform: uppercase;
  letter-spacing: 0.8px; margin-bottom: 3px; font-weight: 600;
}
.lbl-sm.need { color: var(--turquoise); }
.chip-strip { display: flex; gap: 4px; flex-wrap: wrap; max-height: 120px; overflow-y: auto; }
.chip { border-radius: 5px; padding: 3px 9px; font-size: 9px; transition: all 0.15s; border: none; }
.chip.exp    { background: #f3f4f6; color: var(--muted); }
.chip.exp.on { background: var(--peacock); color: #fff; font-weight: 600; }
.rating-strip { display: flex; gap: 3px; }
.rating-btn {
  width: 28px; height: 28px; border-radius: 6px; font-size: 13px;
  background: #f3f4f6; color: var(--muted); border: none;
  display: flex; align-items: center; justify-content: center; transition: all 0.15s;
}
.rating-btn.on { background: var(--purple); color: #fff; }
.chip.limit      { background: #fff; font-weight: 600; font-size: 9px; border-radius: 5px; padding: 3px 9px; }
.chip.limit.hard { border: 1.5px solid var(--red);        color: var(--red); }
.chip.limit.soft { border: 1.5px solid var(--orange);     color: var(--orange); }
.chip.limit.cur  { border: 1.5px solid var(--peacock);    color: var(--peacock); }
.chip.limit.enj  { border: 1.5px solid var(--turquoise);  color: var(--turquoise); }
.chip.limit.fav  { border: 1.5px solid var(--pink);       color: var(--pink); }
.chip.limit.hard.on { background: var(--red);        color: #fff; }
.chip.limit.soft.on { background: var(--orange);     color: #fff; }
.chip.limit.cur.on  { background: var(--peacock);    color: #fff; }
.chip.limit.enj.on  { background: var(--turquoise);  color: #fff; }
.chip.limit.fav.on  { background: var(--pink);       color: #fff; }
.chip.need    { background: #f0fdfa; color: var(--turquoise); border: 1px solid var(--turquoise); border-radius: 10px; padding: 2px 8px; font-size: 9px; }
.chip.need.on { background: var(--turquoise); color: #fff; font-weight: 600; }
.card-footer {
  display: flex; gap: 10px; align-items: flex-end;
  padding: 6px 12px 9px; flex-wrap: wrap;
}
.notes-toggle {
  background: none; border: none; color: var(--muted);
  font-size: 10px; text-decoration: underline; padding: 0; margin-bottom: 4px; display: block;
}
.notes-input {
  width: 100%; padding: 5px 8px; border: 1px solid var(--border);
  border-radius: 5px; font-size: 11px; color: var(--deep-blue); outline: none;
}
.notes-input:focus { border-color: var(--purple); }
.revisit-area { display: flex; flex-direction: column; }
.revisit-date { font-size: 9px; color: var(--muted); margin-bottom: 2px; min-height: 13px; }
.revisit-btn {
  background: #f3f4f6; border: 1px solid var(--border); border-radius: 5px;
  padding: 3px 8px; font-size: 9px; color: var(--muted);
}
.revisit-btn:hover { background: #e5e7eb; }
.blessing { text-align: center; padding-top: 16px; color: var(--pink); font-size: 13px; font-style: italic; }

/* â”€â”€â”€ NEEDS GUIDE MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5);
  z-index: 100; display: flex; align-items: center; justify-content: center; padding: 16px;
}
.modal {
  background: #fff; border-radius: 16px; max-width: 540px; width: 100%;
  max-height: 80vh; overflow-y: auto; padding: 28px;
}
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.modal-header h3 { color: var(--turquoise); font-size: 18px; }
.modal-close { font-size: 22px; color: var(--muted); background: none; border: none; }
.modal-intro { font-size: 12px; color: var(--muted); line-height: 1.5; margin-bottom: 18px; }
.needs-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.need-card { background: #f0fdfa; border-radius: 8px; padding: 10px 12px; border: 1px solid rgba(20,184,166,0.15); }
.need-card .nc-label { color: var(--turquoise); font-weight: 600; font-size: 13px; margin-bottom: 2px; }
.need-card .nc-desc  { color: #4a5568; font-size: 11px; line-height: 1.4; }

/* â”€â”€â”€ PRINT VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#print-view { display: none; max-width: 860px; margin: 0 auto; padding: 24px; font-family: sans-serif; }
#print-view .print-header { text-align: center; margin-bottom: 20px; }
#print-view .print-title  { font-family: Georgia, serif; font-size: 26px; color: var(--purple); font-weight: 700; }
#print-view .print-sub    { font-size: 14px; color: var(--peacock); }
.print-legend { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 20px; font-size: 10px; color: var(--muted); }
.print-card { page-break-inside: avoid; margin-bottom: 20px; }
.print-cat-header { background: var(--purple); color: #fff; padding: 6px 12px; border-radius: 8px 8px 0 0; font-size: 13px; font-weight: 600; }
.print-table { width: 100%; border-collapse: collapse; font-size: 9px; }
.print-table th { background: var(--light-purple); padding: 3px 5px; border: 1px solid #ccc; text-align: left; font-size: 8px; color: var(--deep-blue); }
.print-table td { padding: 2px 6px; border: 1px solid #ccc; }
.print-table .group-row td { background: #f3f4f6; font-style: italic; color: var(--muted); font-size: 8px; }
.print-table .need-cell { color: var(--turquoise); }
.print-table .notes-cell { color: var(--muted); }
.print-blessing { text-align: center; margin-top: 30px; color: var(--pink); font-style: italic; font-size: 12px; }
.print-btns { text-align: center; margin-bottom: 20px; }
.print-btns button { border-radius: 8px; padding: 8px 20px; font-size: 13px; color: #fff; margin: 0 4px; }
.print-btns .back-btn  { background: var(--deep-blue); }
.print-btns .print-btn { background: var(--purple); }

/* â”€â”€â”€ PRINT MEDIA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media print {
  #intro, #header, #cat-nav, #legend-sticky, #main, .modal-overlay, .print-btns { display: none !important; }
  #print-view { display: block !important; }
  body { font-size: 10px; }
  .print-card { page-break-inside: avoid; margin-bottom: 16px; }
}

/* â”€â”€â”€ SEARCH BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#search-bar {
  background: #fff; border-bottom: 1px solid var(--border);
  padding: 8px 14px;
}
#search-bar .search-inner {
  max-width: 860px; margin: 0 auto;
  display: flex; gap: 8px; align-items: center;
}
#search-bar input {
  flex: 1; padding: 7px 12px; border: 1px solid var(--border);
  border-radius: 8px; font-size: 13px; color: var(--deep-blue); outline: none;
  background: #fafafa;
}
#search-bar input:focus { border-color: var(--purple); background: #fff; }
#search-bar input::placeholder { color: var(--muted); }
.search-clear {
  background: none; border: none; color: var(--muted); font-size: 18px;
  line-height: 1; padding: 0 4px; display: none;
}
.search-clear.visible { display: block; }

/* â”€â”€â”€ ALL ITEMS VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#all-items-view {
  max-width: 860px; margin: 0 auto; padding: 14px 14px 40px;
  min-height: calc(100vh - 140px);
}
.all-sort-row {
  display: flex; gap: 6px; flex-wrap: wrap; align-items: center;
  margin-bottom: 14px;
}
.all-sort-row .sort-lbl { font-size: 10px; color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.6px; }
.sort-btn {
  background: #fff; border: 1px solid var(--border); border-radius: 14px;
  padding: 3px 10px; font-size: 10px; color: var(--deep-blue); transition: all 0.15s;
}
.sort-btn.active { background: var(--purple); color: #fff; border-color: var(--purple); font-weight: 600; }
.all-results-count { font-size: 10px; color: var(--muted); margin-left: auto; }
/* category badge on each card in all-items view */
.cat-badge {
  display: inline-block; font-size: 8px; font-weight: 700;
  background: var(--light-purple); color: var(--purple);
  border-radius: 4px; padding: 1px 5px; margin-left: 6px;
  vertical-align: middle; white-space: nowrap;
}
/* no-results */
.no-results {
  text-align: center; padding: 60px 20px; color: var(--muted);
  font-size: 14px; font-style: italic;
}

</style>
</head>
<body>

<!-- â•â•â• INTRO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="intro">
  <div class="inner">
    <div class="intro-eyebrow">Welcome to</div>
    <h1>Journey Unbound</h1>
    <div class="intro-sub">Kink &amp; Connection Checklist</div>
    <div class="intro-card">
      <p>A living tool for <strong>self-discovery</strong> â€” not a test, not a contract. It uses the community-familiar rating system but adds a layer of emotional depth that's uniquely yours.</p>
      <div class="intro-legend">
        <div class="legend-title">How the ratings work</div>
        <div class="legend-body" id="intro-legend-body"></div>
      </div>
      <p class="intro-blessing">ğŸ’œ There are no wrong answers. This journey is yours. Find Your Path.</p>
    </div>
    <div class="mode-label">How would you like to explore?</div>
    <div class="mode-buttons">
      <button class="mode-btn peacock" onclick="startMode('anonymous')">
        <div class="btn-title">ğŸ”’ Anonymous</div>
        <div class="btn-desc">Nothing is saved. Explore freely and print when you're ready.</div>
      </button>
      <button class="mode-btn purple" onclick="startMode('profile')">
        <div class="btn-title">ğŸ’œ Save to Profile</div>
        <div class="btn-desc">Your progress saves and grows with you over time. Revisit anytime.</div>
      </button>
    </div>
  </div>
</div>

<!-- â•â•â• CHECKLIST UI â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="header" style="display:none">
  <div class="header-left">
    <span class="title">Journey Unbound</span>
    <span class="mode-badge" id="mode-badge"></span>
  </div>
  <div class="header-btns">
    <button onclick="openSearch()">ğŸ” Search</button>
    <button onclick="openNeedsGuide()">ğŸ’š Needs Guide</button>
    <button onclick="showPrint()">ğŸ–¨ï¸ Print</button>
    <button onclick="goIntro()">â†© Back</button>
  </div>
</div>

<div id="cat-nav" style="display:none">
  <div class="nav-inner" id="cat-nav-inner"></div>
</div>

<div id="search-bar" style="display:none">
  <div class="search-inner">
    <input type="text" id="search-input" placeholder="Search all itemsâ€¦ e.g. branding, rope, breathâ€¦" oninput="onSearchInput()" />
    <button class="search-clear" id="search-clear-btn" onclick="clearSearch()">Ã—</button>
  </div>
</div>

<div id="legend-sticky" style="display:none">
  <div class="legend-inner" id="legend-inner"></div>
</div>

<div id="main" style="display:none">
  <div class="desc-card" id="desc-card"></div>
  <div class="filter-row" id="filter-row"></div>
  <div id="items-container"></div>
  <div class="blessing">ğŸ’œ Love Yourself, Your Journey Is Precious, Find Your Path</div>
</div>

<div id="all-items-view" style="display:none">
  <div class="all-sort-row">
    <span class="sort-lbl">Sort by</span>
    <button class="sort-btn active" onclick="setAllSort('alpha')" id="sort-alpha">A â€“ Z</button>
    <button class="sort-btn" onclick="setAllSort('category')" id="sort-category">Category</button>
    <button class="sort-btn" onclick="setAllSort('rated')" id="sort-rated">Rated first</button>
    <span class="all-results-count" id="all-results-count"></span>
  </div>
  <div id="all-items-list"></div>
</div>

<!-- â•â•â• NEEDS MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="needs-modal" style="display:none" onclick="closeNeedsGuide(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h3>ğŸ’š NVC Needs Guide</h3>
      <button class="modal-close" onclick="closeNeedsGuide()">Ã—</button>
    </div>
    <p class="modal-intro">These needs come from Nonviolent Communication (NVC). When choosing a need for an activity, ask yourself: <em>"What does this give me? What am I really looking for?"</em></p>
    <div class="needs-grid" id="needs-grid"></div>
  </div>
</div>

<!-- â•â•â• PRINT VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="print-view">
  <div class="print-btns">
    <button class="back-btn" onclick="hidePrint()">â† Back</button>
    <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ Print</button>
  </div>
  <div class="print-header">
    <div class="print-title">Journey Unbound</div>
    <div class="print-sub">Kink &amp; Connection Checklist</div>
  </div>
  <div class="print-legend" id="print-legend"></div>
  <div id="print-body"></div>
  <div class="print-blessing">ğŸ’œ Love Yourself, Your Journey Is Precious, Find Your Path</div>
</div>

<!-- â•â•â• JS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â”€â”€â”€ TOOLTIP DESCRIPTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Items that aren't self-explanatory get a description here.
// Key = exact item name string. If missing, no tooltip shows.
const TIPS = {
  "Dominant (Dom / Domme)":"The person who takes the leading, controlling role in a dynamic or scene.",
  "Daddy / Mommy":"A nurturing dominant archetype â€” guidance, care, and affection paired with authority.",
  "Master / Mistress":"A deeper, often long-term dominant role implying ownership and devotion.",
  "Owner":"Someone who holds a formal ownership dynamic over their submissive partner.",
  "Brat Tamer":"A dominant who enjoys reining in a bratty, cheeky submissive.",
  "Disciplinarian":"A dominant focused on rules, structure, and enforcing consequences.",
  "Sadist":"Someone who derives pleasure from inflicting consensual pain or psychological intensity.",
  "Primal â€“ Predator":"A raw, instinct-driven dominant who channels animalistic energy in play.",
  "Sir / Maâ€™am":"A respectful, authoritative dominant title â€” often used in protocol-driven dynamics.",
  "Caregiver":"A dominant whose role centres on nurturing, protecting, and emotionally supporting their partner.",
  "Financial Dominant (FinDom)":"A dominant who holds power through financial control â€” the sub derives pleasure from giving.",
  "Submissive (Sub)":"Someone who consensually surrenders control to a dominant partner.",
  "Slave":"A deeper submissive role â€” often implies a more total exchange of power and devotion.",
  "Brat":"A playfully disobedient submissive who enjoys provoking their dominant.",
  "Little":"Someone who enjoys regressing into a younger, more carefree headspace.",
  "Baby / Babygirl / Babyboy":"A nurturing dynamic where the submissive embraces a very young, dependent role.",
  "Good Girl / Good Boy":"A submissive who finds deep fulfilment in pleasing and being praised by their dominant.",
  "Alpha Sub":"A submissive who has a strong, confident personality but still desires to surrender control.",
  "Smart-Assed Masochist (SAM)":"A submissive who deliberately misbehaves to earn punishment â€” part of the game.",
  "Masochist":"Someone who finds pleasure or fulfilment in receiving pain.",
  "Prey":"The submissive side of a primal dynamic â€” enjoys being chased or captured.",
  "Pay Pig / Human ATM":"A submissive who finds fulfilment in financially serving a dominant.",
  "Do-Me Sub":"A submissive who enjoys receiving pleasure but doesnâ€™t necessarily serve or obey.",
  "Caring Submissive":"A sub who expresses devotion through acts of care and nurturing toward their dominant.",
  "Switch":"Someone comfortable in both dominant and submissive roles depending on the dynamic or mood.",
  "Kinkster (exploring)":"Someone actively curious and learning about kink â€” no fixed identity yet.",
  "Primal â€“ Prey":"The instinct-driven submissive in a primal dynamic â€” raw, reactive, animalistic.",
  "Top":"The person who performs or gives during a scene (not necessarily dominant in an emotional sense).",
  "Bottom":"The person who receives during a scene (not necessarily submissive in an emotional sense).",
  "Hedonist":"Someone driven by the pursuit of pleasure in all its forms.",
  "Pet â€“ Puppy":"Taking on a puppy persona â€” playful, loyal, eager to please. A form of pet play.",
  "Pet â€“ Kitten":"Taking on a kitten persona â€” curious, independent, affectionate on your own terms.",
  "Pet â€“ Pony":"Taking on a pony persona â€” graceful, powerful, often involves ponying gear and training.",
  "Pet â€“ Other animal":"Pet play with any animal persona beyond the common ones â€” fox, bunny, dragon, etc.",
  "Owner (of a pet)":"The dominant in a pet play dynamic who cares for and guides their pet.",
  "Furry â€“ I have a Fursona":"You have a character (animal persona) that represents you in furry spaces.",
  "Furry â€“ roleplay in character":"Playing as your fursona in written or verbal roleplay scenes.",
  "Furry â€“ cosplay / partial suit":"Wearing partial fur costume pieces (ears, tail, hood) during play or socially.",
  "Furry â€“ full suit play":"Wearing a full fursuit during play or social interactions.",
  "Furry â€“ community & social":"Participating in furry communities, conventions, or social groups.",
  "Ethical Non-Monogamy (ENM)":"An umbrella term for any relationship structure where all partners consensually agree that having multiple partners is okay.",
  "Polyamory â€“ multiple romantic relationships":"Having more than one loving, romantic relationship simultaneously â€” with everyoneâ€™s knowledge and consent.",
  "Open relationship â€“ romantic exclusivity, sexual freedom":"Romantically committed to one person, but both partners are free to have sexual connections with others.",
  "Relationship Anarchy":"A philosophy that rejects traditional relationship â€˜rulesâ€™ â€” connections arenâ€™t ranked or categorised. Each relationship is unique and self-defined.",
  "Solo Polyamory":"Practicing polyamory while maintaining your independence â€” no primary partner or cohabitation.",
  "Hierarchical Polyamory":"A poly structure where one relationship is considered â€˜primaryâ€™ and takes priority over others.",
  "Non-Hierarchical Polyamory":"A poly structure where no relationship is ranked above another â€” all are valued equally.",
  "Triad / Throuple":"A romantic or sexual relationship involving three people who are all connected to each other.",
  "Polycule":"A network of people connected through romantic or sexual relationships â€” like a web rather than a triangle.",
  "Cuckold / Cuckquean dynamic":"A kink where one partner derives arousal from watching or knowing their partner is with someone else. Cuckquean is the female version.",
  "Long-term D/s dynamic":"A dominant-submissive power exchange relationship that extends beyond the bedroom into everyday life over time.",
  "Wartenburg pinwheel":"A small medical-style wheel with tiny pins â€” rolled across the skin for sharp, tingling sensation.",
  "Abrasion (scraping, sanding)":"Using rough textures on the skin to create intense sensation â€” sandpaper, rough fabric, etc.",
  "Electricity â€“ TENS unit":"A small device that sends mild electrical pulses through the skin â€” originally for muscle therapy, repurposed for play.",
  "Electricity â€“ violet wand":"A glass electrode device that creates visible sparks and a buzzing sensation on the skin.",
  "Non-verbal communication signals":"Using gestures, body language, or signals instead of words to communicate during play.",
  "Intentional eye gazing":"Holding deep, sustained eye contact with intention â€” can be profoundly intimate and connecting.",
  "Speech restrictions":"Limiting or controlling what a partner is allowed to say during a scene or dynamic.",
  "Protocol and ritual":"Structured rules or ceremonies within a D/s dynamic â€” forms of address, behaviours, or rituals that reinforce the power exchange.",
  "Orgasm control / denial":"The dominant controls when (or if) the submissive is allowed to reach orgasm.",
  "Total Power Exchange (TPE)":"An extreme dynamic where one partner surrenders nearly all decision-making autonomy to the other.",
  "Ownership dynamic":"A formal arrangement where one partner is symbolically â€˜ownedâ€™ by the other â€” deep commitment and trust.",
  "Spreader bars":"Rigid bars that hold limbs apart â€” ankles or wrists â€” for exposure and restraint.",
  "Rope bondage â€“ decorative":"Tying rope in beautiful, aesthetic patterns on the body â€” art as much as play.",
  "Rope bondage â€“ functional":"Tying rope to actually restrain movement â€” practical bondage.",
  "Rope bondage â€“ Japanese (Shibari)":"An ancient Japanese art of rope bondage â€” precise, aesthetic, and deeply intimate.",
  "Rope bondage â€“ suspension":"Being fully or partially suspended in the air using rope bondage â€” advanced and exhilarating.",
  "Bondage furniture":"Specialised furniture designed for restraint â€” benches, frames, chairs with attachment points.",
  "Mummification":"Wrapping the entire body tightly (in bandages, plastic wrap, etc.) â€” intense sensory experience and vulnerability.",
  "Straight jacket":"A garment that restrains the arms and torso â€” used in play for confinement and vulnerability.",
  "Spanking â€“ OTK (over the knee)":"The classic position â€” draped over someoneâ€™s knee for spanking.",
  "Consensual non-consent (CNC)":"A roleplay scenario where partners act out a non-consensual scenario â€” fully negotiated and consensual beforehand.",
  "Dollification":"A roleplay where the submissive becomes a passive, objectified â€˜dollâ€™ â€” dressed up and posed by the dominant.",
  "Serving as furniture / object":"The submissive takes on a role as an inanimate object â€” a footrest, a table, etc.",
  "Forced feminization / masculinization":"A roleplay or dynamic where the dominant dresses or presents the submissive in a way that doesnâ€™t match their usual gender expression.",
  "Collars â€“ private":"Wearing a collar as a symbol of a D/s dynamic â€” kept private, worn at home or in intimate settings.",
  "Collars â€“ public":"Wearing a collar openly in public as a visible symbol of a dynamic or commitment.",
  "Energy exchange (non-physical)":"Connecting and exchanging emotional or spiritual energy without physical touch â€” through eye contact, intention, or presence.",
  "Ritualized intimacy":"Approaching intimacy with ceremony or structure â€” creating a sacred, intentional space.",
  "Ecstatic / trance states":"Reaching altered states of consciousness through intense play, breathwork, or meditation.",
  "Hypnosis / guided trance":"Using hypnotic suggestion to guide a partner into a relaxed, suggestible state â€” consensual and negotiated.",
  "Tantric practices":"Ancient practices that use breath, movement, and energy to deepen sexual and spiritual connection."
};

// â”€â”€â”€ CORE DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const NVC_NEEDS = [
  {label:"Connection",    desc:"Intimacy, closeness, feeling truly seen by another person"},
  {label:"Excitement",    desc:"Novelty, aliveness, that electric feeling of something new"},
  {label:"Surrender",     desc:"Letting go, releasing control, trusting someone fully"},
  {label:"Power",         desc:"Agency, influence, feeling strong and in charge"},
  {label:"Expression",    desc:"Creativity, authenticity, showing your true self"},
  {label:"Safety",        desc:"Being held, protected, knowing you are secure"},
  {label:"Play",          desc:"Joy, lightness, laughter, the pure fun of it"},
  {label:"Healing",       desc:"Processing, integrating, moving through something difficult"},
  {label:"Belonging",     desc:"Being part of something, feeling accepted as you are"},
  {label:"Autonomy",      desc:"Freedom, self-determination, choosing your own path"},
  {label:"Respect",       desc:"Being valued, honoured, taken seriously"},
  {label:"Trust",         desc:"Knowing someone has your back, relying on them"},
  {label:"Nurturing",     desc:"Being cared for, or caring for someone, tenderness"},
  {label:"Validation",    desc:"Having your feelings acknowledged and affirmed"},
  {label:"Adventure",     desc:"Pushing into the unknown, exploring new territory"},
  {label:"Presence",      desc:"Being fully in the moment, mindfulness, stillness"},
  {label:"Vulnerability", desc:"Opening up, being raw and real, emotional risk"},
  {label:"Purpose",       desc:"Feeling like this journey means something deeper"},
  {label:"Empathy",       desc:"Being understood, feeling someone truly gets you"},
  {label:"Challenge",     desc:"Testing yourself, growth through difficulty"},
  {label:"Order",         desc:"Structure, clarity, knowing what to expect"},
  {label:"Peace",         desc:"Calm, harmony, emotional balance"},
  {label:"Stimulation",   desc:"Intensity, arousal, being fully engaged"},
  {label:"Beauty",        desc:"Aesthetics, artistry, experiencing something sublime"},
  {label:"Competence",    desc:"Skill, mastery, knowing you can do this well"},
  {label:"Creativity",    desc:"Innovation, imagination, making something new"},
  {label:"Discovery",     desc:"Learning, curiosity, finding out what's possible"},
  {label:"Growth",        desc:"Evolution, development, becoming more"},
  {label:"Hope",          desc:"Optimism, possibility, believing in what could be"},
  {label:"Inspiration",   desc:"Being moved, motivated, feeling called to something"},
  {label:"Intimacy",      desc:"Deep knowing, profound closeness, soul connection"},
  {label:"Love",          desc:"Affection, care, deep emotional bond"},
  {label:"Meaning",       desc:"Significance, understanding why this matters"},
  {label:"Mourning",      desc:"Grieving, releasing, honoring what's being let go"},
  {label:"Mutuality",     desc:"Reciprocity, balance, equal exchange"},
  {label:"Spontaneity",   desc:"Improvisation, flow, freedom from planning"},
  {label:"Stability",     desc:"Consistency, predictability, solid ground"},
  {label:"To understand", desc:"Clarity, comprehension, making sense of experience"},
  {label:"Celebration",   desc:"Joy, honoring achievement, marking moments"},
  {label:"Awareness",     desc:"Consciousness, attention, being awake to experience"},
  {label:"Clarity",       desc:"Understanding, knowing what's true, seeing clearly"},
  {label:"Contribution",  desc:"Giving, serving, making a difference"},
  {label:"Effectiveness", desc:"Impact, getting results, making things happen"},
  {label:"Equality",      desc:"Fairness, balance, mutual respect"},
  {label:"Harmony",       desc:"Flow, alignment, things working together"},
  {label:"Integrity",     desc:"Wholeness, honesty, being true to yourself"},
  {label:"Self-Worth",    desc:"Value, dignity, knowing you matter"},
  {label:"Spirituality",  desc:"Transcendence, connection to something greater"},
];

// Hard Limit needs - for boundaries
const HARD_LIMIT_NEEDS = [
  // Avoiding Harm (at top - visually distinct)
  {label:"To not feel abandoned", desc:"Protection from emotional abandonment", category:"harm"},
  {label:"To not feel betrayed", desc:"Protection from breach of trust", category:"harm"},
  {label:"To not feel coerced", desc:"Protection from pressure or force", category:"harm"},
  {label:"To not feel diminished", desc:"Protection from being made to feel small", category:"harm"},
  {label:"To not feel disrespected", desc:"Protection from disrespect or contempt", category:"harm"},
  {label:"To not feel manipulated", desc:"Protection from manipulation or deception", category:"harm"},
  {label:"To not feel pressured", desc:"Protection from unwanted pressure", category:"harm"},
  {label:"To not feel used", desc:"Protection from being exploited", category:"harm"},
  {label:"To not feel violated", desc:"Protection from violation of boundaries", category:"harm"},
  {label:"To not feel overwhelmed", desc:"Protection from being pushed too far", category:"harm"},
  {label:"To not feel unsafe", desc:"Protection from physical or emotional danger", category:"harm"},
  // Physical & Emotional Safety
  {label:"Safety / Security", desc:"Feeling safe and secure", category:"safety"},
  {label:"Protection", desc:"Being protected from harm", category:"safety"},
  {label:"Well-Being", desc:"Overall health and wellness", category:"safety"},
  {label:"Health / Balance", desc:"Physical and emotional balance", category:"safety"},
  // Self-Respect & Dignity
  {label:"Self-respect", desc:"Maintaining respect for yourself", category:"dignity"},
  {label:"Self-Worth", desc:"Knowing your inherent value", category:"dignity"},
  {label:"Integrity", desc:"Living in alignment with your values", category:"dignity"},
  {label:"Authenticity", desc:"Being true to yourself", category:"dignity"},
  // Autonomy & Boundaries
  {label:"Autonomy", desc:"Self-determination and agency", category:"autonomy"},
  {label:"Choice", desc:"Freedom to choose", category:"autonomy"},
  {label:"Freedom", desc:"Liberty and independence", category:"autonomy"},
  {label:"Independence", desc:"Self-sufficiency", category:"autonomy"},
  {label:"Space", desc:"Room to breathe and be yourself", category:"autonomy"},
  {label:"Privacy", desc:"Control over what is shared", category:"autonomy"},
  // Trust & Stability
  {label:"Trust", desc:"Trusting yourself and your judgment", category:"stability"},
  {label:"Stability", desc:"Consistency and predictability", category:"stability"},
  {label:"Order", desc:"Structure and organization", category:"stability"},
  {label:"Clarity", desc:"Clear understanding", category:"stability"},
  {label:"Peace", desc:"Inner calm and tranquility", category:"stability"},
  {label:"Ease", desc:"Comfort and lack of strain", category:"stability"},
];

const RATINGS = [
  {value:0, label:"Not for Me", emoji:"ğŸš«"},
  {value:1, label:"Not Yet",    emoji:"ğŸŒ±"},
  {value:2, label:"Neutral",    emoji:"ã€°ï¸"},
  {value:3, label:"Open To It", emoji:"âœ¨"},
  {value:4, label:"Enjoy",      emoji:"ğŸ’›"},
  {value:5, label:"Favourite",  emoji:"ğŸ’œ"},
];

const EXPERIENCE = ["Never Tried","Tried","Versed"];
const LIMITS = [
  {label:"Hard Limit", cls:"hard"},
  {label:"Soft Limit", cls:"soft"},
  {label:"Curious",    cls:"cur"},
  {label:"Enjoy",      cls:"enj"},
  {label:"Favourite",  cls:"fav"},
];

const DATA = {
  "Roles & Identity": {
    icon:"ğŸ­",
    description:"Explore which roles resonate with you. Many people identify with more than one â€” and roles shift over time. This isnâ€™t a permanent label, itâ€™s a snapshot of where you are right now.",
    items:[
      {name:"Dominant (Dom / Domme)",group:"Dominant"},
      {name:"Daddy / Mommy",group:"Dominant"},
      {name:"Master / Mistress",group:"Dominant"},
      {name:"Owner",group:"Dominant"},
      {name:"Brat Tamer",group:"Dominant"},
      {name:"Disciplinarian",group:"Dominant"},
      {name:"Sadist",group:"Dominant"},
      {name:"Primal â€“ Predator",group:"Dominant"},
      {name:"Sir / Maâ€™am",group:"Dominant"},
      {name:"Caregiver",group:"Dominant"},
      {name:"Financial Dominant (FinDom)",group:"Dominant"},
      {name:"Submissive (Sub)",group:"Submissive"},
      {name:"Slave",group:"Submissive"},
      {name:"Brat",group:"Submissive"},
      {name:"Little",group:"Submissive"},
      {name:"Baby / Babygirl / Babyboy",group:"Submissive"},
      {name:"Good Girl / Good Boy",group:"Submissive"},
      {name:"Alpha Sub",group:"Submissive"},
      {name:"Smart-Assed Masochist (SAM)",group:"Submissive"},
      {name:"Masochist",group:"Submissive"},
      {name:"Prey",group:"Submissive"},
      {name:"Pay Pig / Human ATM",group:"Submissive"},
      {name:"Do-Me Sub",group:"Submissive"},
      {name:"Caring Submissive",group:"Submissive"},
      {name:"Switch",group:"Fluid & Other"},
      {name:"Kinkster (exploring)",group:"Fluid & Other"},
      {name:"Primal â€“ Prey",group:"Fluid & Other"},
      {name:"Top",group:"Fluid & Other"},
      {name:"Bottom",group:"Fluid & Other"},
      {name:"Hedonist",group:"Fluid & Other"},
      {name:"Pet â€“ Puppy",group:"Pet Play & Furry"},
      {name:"Pet â€“ Kitten",group:"Pet Play & Furry"},
      {name:"Pet â€“ Pony",group:"Pet Play & Furry"},
      {name:"Pet â€“ Other animal",group:"Pet Play & Furry"},
      {name:"Owner (of a pet)",group:"Pet Play & Furry"},
      {name:"Furry â€“ I have a Fursona",group:"Pet Play & Furry"},
      {name:"Furry â€“ roleplay in character",group:"Pet Play & Furry"},
      {name:"Furry â€“ cosplay / partial suit",group:"Pet Play & Furry"},
      {name:"Furry â€“ full suit play",group:"Pet Play & Furry"},
      {name:"Furry â€“ community & social",group:"Pet Play & Furry"},
    ]
  },
  "Relationships & Sexuality": {
    icon:"ğŸ’",
    description:"Understanding your relationship style and sexual preferences is foundational. Inspired by the wisdom in The Ethical Slut â€” there is no single â€˜rightâ€™ way to love or connect. Only whatâ€™s authentic to you.",
    items:[
      {name:"Monogamy (exclusive partnership)",group:"Relationship Structures"},
      {name:"Ethical Non-Monogamy (ENM)",group:"Relationship Structures"},
      {name:"Polyamory â€“ multiple romantic relationships",group:"Relationship Structures"},
      {name:"Open relationship â€“ romantic exclusivity, sexual freedom",group:"Relationship Structures"},
      {name:"Relationship Anarchy",group:"Relationship Structures"},
      {name:"Swinging (with couples)",group:"Relationship Structures"},
      {name:"Friends with Benefits",group:"Relationship Structures"},
      {name:"Solo Polyamory",group:"Relationship Structures"},
      {name:"Hierarchical Polyamory",group:"Relationship Structures"},
      {name:"Non-Hierarchical Polyamory",group:"Relationship Structures"},
      {name:"Triad / Throuple",group:"Relationship Structures"},
      {name:"Polycule",group:"Relationship Structures"},
      {name:"Cuckold / Cuckquean dynamic",group:"Relationship Structures"},
      {name:"Doesnâ€™t fit a label â€“ fluid",group:"Relationship Structures"},
      {name:"Solo exploration",group:"Sexual Preferences"},
      {name:"One partner",group:"Sexual Preferences"},
      {name:"Multiple partners (sequential)",group:"Sexual Preferences"},
      {name:"Multiple partners (simultaneous)",group:"Sexual Preferences"},
      {name:"Group play",group:"Sexual Preferences"},
      {name:"Voyeurism â€“ watching others",group:"Sexual Preferences"},
      {name:"Exhibitionism â€“ being watched",group:"Sexual Preferences"},
      {name:"Kink with deep emotional connection",group:"Sexual Preferences"},
      {name:"Kink without emotional connection",group:"Sexual Preferences"},
      {name:"Casual play partners",group:"Sexual Preferences"},
      {name:"Long-term D/s dynamic",group:"Sexual Preferences"},
      {name:"Play-only (no romantic relationship)",group:"Sexual Preferences"},
    ]
  },
  "Sensation & Touch": {
    icon:"ğŸŒ¸",
    description:"How your body experiences and responds to physical sensation is deeply personal. Notice what draws you in â€” and what feels like a boundary. Both are information.",
    items:[
      {name:"Gentle touch and caressing",group:"Soft Sensation"},
      {name:"Feather or soft material play",group:"Soft Sensation"},
      {name:"Massage (giving)",group:"Soft Sensation"},
      {name:"Massage (receiving)",group:"Soft Sensation"},
      {name:"Tickling",group:"Soft Sensation"},
      {name:"Scratching (receiving)",group:"Soft Sensation"},
      {name:"Scratching (giving)",group:"Soft Sensation"},
      {name:"Biting â€“ gentle",group:"Soft Sensation"},
      {name:"Biting â€“ intense",group:"Intense Sensation"},
      {name:"Branding",group:"Intense Sensation"},
      {name:"Ice / temperature play (cold)",group:"Intense Sensation"},
      {name:"Heat play (warm wax, warming oils)",group:"Intense Sensation"},
      {name:"Hot wax dripping",group:"Intense Sensation"},
      {name:"Wartenburg pinwheel",group:"Intense Sensation"},
      {name:"Abrasion (scraping, sanding)",group:"Intense Sensation"},
      {name:"Electricity â€“ TENS unit",group:"Intense Sensation"},
      {name:"Electricity â€“ violet wand",group:"Intense Sensation"},
      {name:"Sensory deprivation â€“ blindfold",group:"Deprivation"},
      {name:"Sensory deprivation â€“ sound / ears",group:"Deprivation"},
      {name:"Sensory deprivation â€“ full hood",group:"Deprivation"},
    ]
  },
  "Communication & Connection": {
    icon:"ğŸ—£ï¸",
    description:"Communication is the heartbeat of healthy kink. These arenâ€™t just activities â€” theyâ€™re the skills that make everything else possible and safe.",
    items:[
      {name:"Eye contact during intimacy",group:"Core Connection"},
      {name:"Flirting",group:"Core Connection"},
      {name:"Verbal affirmation and praise",group:"Core Connection"},
      {name:"Massages (giving)",group:"Core Connection"},
      {name:"Massages (receiving)",group:"Core Connection"},
      {name:"Dirty talk",group:"Core Connection"},
      {name:"Expressing desires out loud",group:"Core Connection"},
      {name:"Active listening",group:"Core Connection"},
      {name:"Non-verbal communication signals",group:"Core Connection"},
      {name:"Intentional eye gazing",group:"Core Connection"},
      {name:"Creating safe words / signals",group:"Negotiation & Safety"},
      {name:"Negotiating scenes beforehand",group:"Negotiation & Safety"},
      {name:"Check-ins during activity",group:"Negotiation & Safety"},
      {name:"Aftercare â€“ talking it through",group:"Negotiation & Safety"},
      {name:"Discussing boundaries openly",group:"Negotiation & Safety"},
      {name:"Speech restrictions",group:"Negotiation & Safety"},
      {name:"Journaling about experiences",group:"Reflection"},
      {name:"Sharing experiences with partner(s)",group:"Reflection"},
      {name:"Processing emotions after play",group:"Reflection"},
    ]
  },
  "Power Exchange": {
    icon:"âš¡",
    description:"Power exchange is one of the deepest forms of connection two people can share. Explore where you feel most alive â€” leading, following, or flowing between both.",
    items:[
      {name:"Taking the lead",group:"Foundational"},
      {name:"Following anotherâ€™s lead",group:"Foundational"},
      {name:"Receiving commands",group:"Foundational"},
      {name:"Giving commands",group:"Foundational"},
      {name:"Submission (general)",group:"Foundational"},
      {name:"Domination (general)",group:"Foundational"},
      {name:"Discipline",group:"Foundational"},
      {name:"Begging",group:"Foundational"},
      {name:"Switching roles mid-scene",group:"Foundational"},
      {name:"Service acts (non-sexual)",group:"Deeper Exchange"},
      {name:"Acts of care and nurturing",group:"Deeper Exchange"},
      {name:"Protocol and ritual",group:"Deeper Exchange"},
      {name:"Humiliation",group:"Deeper Exchange"},
      {name:"Degradation",group:"Deeper Exchange"},
      {name:"Teasing",group:"Deeper Exchange"},
      {name:"Orgasm control / denial",group:"Deeper Exchange"},
      {name:"Financial domination",group:"Deeper Exchange"},
      {name:"Chastity play",group:"Deeper Exchange"},
      {name:"Power exchange in daily life",group:"Total Exchange"},
      {name:"24/7 dynamic",group:"Total Exchange"},
      {name:"Total Power Exchange (TPE)",group:"Total Exchange"},
      {name:"Ownership dynamic",group:"Total Exchange"},
    ]
  },
  "Restraint & Bondage": {
    icon:"ğŸª¢",
    description:"From the lightest suggestion of restraint to full suspension â€” bondage is about trust, vulnerability, and the freedom that comes from letting go.",
    items:[
      {name:"Holding hands / wrists during intimacy",group:"Gentle"},
      {name:"Light restraint with hands",group:"Gentle"},
      {name:"Silk scarves or soft materials",group:"Gentle"},
      {name:"Velcro / quick-release restraints",group:"Gentle"},
      {name:"Leather restraints",group:"Intermediate"},
      {name:"Metal restraints / handcuffs",group:"Intermediate"},
      {name:"Spreader bars",group:"Intermediate"},
      {name:"Rope bondage â€“ decorative",group:"Intermediate"},
      {name:"Rope bondage â€“ functional",group:"Intermediate"},
      {name:"Rope bondage â€“ Japanese (Shibari)",group:"Advanced"},
      {name:"Rope bondage â€“ suspension",group:"Advanced"},
      {name:"Bondage furniture",group:"Advanced"},
      {name:"Mummification",group:"Advanced"},
      {name:"Straight jacket",group:"Advanced"},
    ]
  },
  "Impact Play": {
    icon:"âœ‹",
    description:"Impact play ranges from the playful sting of a hand to the deep thud of a flogger. Your body knows what it wants â€” listen to it.",
    items:[
      {name:"Spanking â€“ hand (gentle)",group:"Gentle"},
      {name:"Spanking â€“ hand (moderate)",group:"Gentle"},
      {name:"Spanking â€“ hand (intense)",group:"Moderate"},
      {name:"Spanking â€“ belt / strap",group:"Moderate"},
      {name:"Spanking â€“ OTK (over the knee)",group:"Moderate"},
      {name:"Paddles â€“ soft",group:"Moderate"},
      {name:"Paddles â€“ hard",group:"Moderate"},
      {name:"Floggers â€“ gentle",group:"Moderate"},
      {name:"Floggers â€“ intense",group:"Intense"},
      {name:"Crops",group:"Intense"},
      {name:"Canes",group:"Intense"},
      {name:"Whips",group:"Intense"},
      {name:"Hair pulling",group:"Gentle"},
      {name:"Slapping (face)",group:"Intense"},
      {name:"Rough body play",group:"Intense"},
    ]
  },
  "Role Play & Fantasy": {
    icon:"ğŸŒ™",
    description:"Fantasy is where imagination meets desire. These are the stories your inner world wants to tell. No story is too wild, too soft, or too strange here.",
    items:[
      {name:"Light role play scenarios",group:"Exploratory"},
      {name:"Authority figures (teacher / student)",group:"Exploratory"},
      {name:"Service scenarios (maid, butler)",group:"Exploratory"},
      {name:"Stranger / pick-up fantasy",group:"Exploratory"},
      {name:"Age play â€“ as younger",group:"Specialised"},
      {name:"Age play â€“ as older / caregiver",group:"Specialised"},
      {name:"Medical scenes",group:"Specialised"},
      {name:"Interrogation scenarios",group:"Specialised"},
      {name:"Capture / kidnapping fantasy",group:"Specialised"},
      {name:"Consensual non-consent (CNC)",group:"Specialised"},
      {name:"Primal play (predator / prey)",group:"Specialised"},
      {name:"Deity / worship scenarios",group:"Specialised"},
      {name:"Dollification",group:"Specialised"},
      {name:"Serving as furniture / object",group:"Specialised"},
    ]
  },
  "Exploration & Expression": {
    icon:"âœ¨",
    description:"Self-expression through kink is deeply creative. This section is about how you want to show up in the world â€” and how you want to be seen.",
    items:[
      {name:"Wearing special clothing / lingerie",group:"Expression"},
      {name:"Dressing up for pleasure",group:"Expression"},
      {name:"Exploring gender expression",group:"Expression"},
      {name:"Cross-dressing",group:"Expression"},
      {name:"Forced feminization / masculinization",group:"Expression"},
      {name:"Body worship (giving)",group:"Worship"},
      {name:"Body worship (receiving)",group:"Worship"},
      {name:"Foot worship",group:"Worship"},
      {name:"Collars â€“ private",group:"Worship"},
      {name:"Collars â€“ public",group:"Worship"},
      {name:"Erotic photography â€“ private",group:"Visibility"},
      {name:"Erotic photography â€“ shared",group:"Visibility"},
      {name:"Exhibitionism â€“ private space",group:"Visibility"},
      {name:"Exhibitionism â€“ semi-public",group:"Visibility"},
    ]
  },
  "Energy & Presence": {
    icon:"ğŸŒŠ",
    description:"Beyond the physical, kink can be a deeply spiritual and energetic experience. This section honours that quieter, deeper dimension of connection.",
    items:[
      {name:"Mindful awareness during intimacy",group:"Mindfulness"},
      {name:"Breathwork together",group:"Mindfulness"},
      {name:"Meditation before / after play",group:"Mindfulness"},
      {name:"Synchronized breathing",group:"Mindfulness"},
      {name:"Energy exchange (non-physical)",group:"Spiritual"},
      {name:"Intentional eye gazing",group:"Spiritual"},
      {name:"Creating sacred space",group:"Spiritual"},
      {name:"Ritualized intimacy",group:"Spiritual"},
      {name:"Tantric practices",group:"Spiritual"},
      {name:"Ecstatic / trance states",group:"Spiritual"},
      {name:"Hypnosis / guided trance",group:"Spiritual"},
    ]
  },
  "Sexual Activities": {
    icon:"ğŸ”¥",
    description:"Exploring the full spectrum of sexual expression â€” from tender intimacy to raw passion. Every act here is valid when it's consensual, communicated, and desired by all involved.",
    items:[
      {name:"Kissing",group:"Intimacy"},
      {name:"Making out",group:"Intimacy"},
      {name:"Cuddling",group:"Intimacy"},
      {name:"Cuddling Naked",group:"Intimacy"},
      {name:"Snuggling",group:"Intimacy"},
      {name:"Morning Sex",group:"Intimacy"},
      {name:"Waking up to oral sex",group:"Intimacy"},
      {name:"Showering Together",group:"Intimacy"},
      {name:"Mutual Masturbation",group:"Intimacy"},
      {name:"Oral Sex (giving)",group:"Oral"},
      {name:"Oral Sex (receiving)",group:"Oral"},
      {name:"Blow Jobs",group:"Oral"},
      {name:"Cocksucking",group:"Oral"},
      {name:"Deep Throating",group:"Oral"},
      {name:"Face Fucking",group:"Oral"},
      {name:"Gagging/Choked by Cock",group:"Oral"},
      {name:"Eating Pussy",group:"Oral"},
      {name:"Cunnilingus",group:"Oral"},
      {name:"Pussy Worship",group:"Oral"},
      {name:"Rimming",group:"Oral"},
      {name:"69 position",group:"Oral"},
      {name:"Anal",group:"Anal"},
      {name:"Anal Sex",group:"Anal"},
      {name:"Anal play / fingering",group:"Anal"},
      {name:"Ass Play",group:"Anal"},
      {name:"Pegging",group:"Anal"},
      {name:"Vaginal Sex",group:"Penetration"},
      {name:"Fingering",group:"Penetration"},
      {name:"Doggy Style",group:"Penetration"},
      {name:"Rough Sex",group:"Penetration"},
      {name:"Fisting (vaginal)",group:"Penetration"},
      {name:"Fisting (anal)",group:"Penetration"},
      {name:"Double Penetration",group:"Penetration"},
      {name:"Masturbation (solo)",group:"Pleasure"},
      {name:"Masturbation (mutual)",group:"Pleasure"},
      {name:"Handjobs",group:"Pleasure"},
      {name:"Multiple Orgasms",group:"Pleasure"},
      {name:"Squirting",group:"Pleasure"},
      {name:"Female Ejaculation",group:"Pleasure"},
      {name:"Creampie",group:"Pleasure"},
      {name:"Cum play",group:"Pleasure"},
      {name:"Being called a good girl/boy",group:"Pleasure"},
      {name:"Threesomes (MMF)",group:"Group Play"},
      {name:"Threesomes (FFM)",group:"Group Play"},
      {name:"Gangbangs",group:"Group Play"},
      {name:"Outdoor sex",group:"Public & Exhibitionism"},
      {name:"Sex In Public",group:"Public & Exhibitionism"},
      {name:"Making Home Movies",group:"Public & Exhibitionism"},
    ]
  },
  "Toys & Equipment": {
    icon:"ğŸ€",
    description:"From simple pleasure tools to complex devices â€” toys enhance sensation, expand possibility, and let you explore in ways bodies alone cannot. Start simple, explore at your pace.",
    items:[
      {name:"Vibrators",group:"Pleasure Toys"},
      {name:"Dildos",group:"Pleasure Toys"},
      {name:"Butt Plugs",group:"Pleasure Toys"},
      {name:"Anal toys",group:"Pleasure Toys"},
      {name:"Remote-Control Devices",group:"Pleasure Toys"},
      {name:"Toys (general exploration)",group:"Pleasure Toys"},
      {name:"Strap-ons",group:"Pleasure Toys"},
      {name:"Blindfolds",group:"Sensory Toys"},
      {name:"Gags",group:"Sensory Toys"},
      {name:"Nipple clamps",group:"Sensory Toys"},
      {name:"Handcuffs",group:"Restraints"},
      {name:"Chains",group:"Restraints"},
      {name:"Rope (general)",group:"Restraints"},
      {name:"Bondage equipment",group:"Restraints"},
      {name:"Restraints (general)",group:"Restraints"},
      {name:"Collars (general)",group:"Restraints"},
      {name:"Collar and Lead/Leash",group:"Restraints"},
      {name:"Spreader bars",group:"Restraints"},
      {name:"Whips",group:"Impact Tools"},
      {name:"Paddles",group:"Impact Tools"},
      {name:"Crops",group:"Impact Tools"},
      {name:"Floggers",group:"Impact Tools"},
      {name:"Canes",group:"Impact Tools"},
    ]
  },
  "Body Features & Aesthetics": {
    icon:"ğŸ’",
    description:"What draws our eye, what stirs desire â€” physical features and aesthetics that speak to us. Attraction is diverse, personal, and deeply valid in all its forms.",
    items:[
      {name:"Tattoos",group:"Body Modification"},
      {name:"Piercings",group:"Body Modification"},
      {name:"Body art appreciation",group:"Body Modification"},
      {name:"High Heels",group:"Fashion & Presentation"},
      {name:"Lingerie",group:"Fashion & Presentation"},
      {name:"Pantyhose/Stockings",group:"Fashion & Presentation"},
      {name:"Specific clothing styles",group:"Fashion & Presentation"},
      {name:"Breasts",group:"Physical Features"},
      {name:"Nipples",group:"Physical Features"},
      {name:"Body shape preferences",group:"Physical Features"},
      {name:"Intelligence (sapiosexuality)",group:"Personal Qualities"},
      {name:"Personality traits",group:"Personal Qualities"},
    ]
  },
  "Fluids & Edge Play": {
    icon:"ğŸ’§",
    description:"Advanced and edge play involving bodily fluids and intense physical experiences. These practices require significant trust, communication, and often specialized knowledge for safety.",
    items:[
      {name:"Watersports / Golden showers",group:"Fluid Play"},
      {name:"Scat play",group:"Fluid Play"},
      {name:"Blood play",group:"Edge Play"},
      {name:"Knife play",group:"Edge Play"},
      {name:"Breath Play (advanced)",group:"Edge Play"},
      {name:"Choking Play",group:"Edge Play"},
      {name:"Pain (intense)",group:"Edge Play"},
      {name:"Extreme sensation",group:"Edge Play"},
    ]
  },
  "Gorean Lifestyle": {
    icon:"ğŸ›ï¸",
    description:"Inspired by John Norman's Chronicles of Gor, this philosophy centers on structured power exchange, protocol, and Master/kajira (slave) dynamics. Gorean practices emphasize ritual, positions, and total submission within consensual relationships. This is a complete lifestyle for some practitioners.",
    items:[
      {name:"Gorean Master/Owner",group:"Gorean Roles"},
      {name:"Gorean Free Person",group:"Gorean Roles"},
      {name:"Kajira (female slave)",group:"Gorean Roles"},
      {name:"Kajirus (male slave)",group:"Gorean Roles"},
      {name:"First Girl (lead kajira)",group:"Gorean Roles"},
      {name:"Tower Slave (domestic service)",group:"Gorean Roles"},
      {name:"Pleasure Slave (Gorean)",group:"Gorean Roles"},
      {name:"Work Slave (Gorean)",group:"Gorean Roles"},
      {name:"Panther Girl",group:"Gorean Roles"},
      {name:"Nadu (pleasure slave position)",group:"Gorean Positions"},
      {name:"Tower (modestly kneeling)",group:"Gorean Positions"},
      {name:"Sula (on back, legs spread)",group:"Gorean Positions"},
      {name:"Bara (belly, ready for binding)",group:"Gorean Positions"},
      {name:"Lesha (ready for leashing)",group:"Gorean Positions"},
      {name:"First Obeisance",group:"Gorean Positions"},
      {name:"Second Obeisance",group:"Gorean Positions"},
      {name:"Whip Position (kneeling to whip)",group:"Gorean Positions"},
      {name:"Hair Position (Gorean)",group:"Gorean Positions"},
      {name:"Heel Position (following)",group:"Gorean Positions"},
      {name:"Gorean Protocols",group:"Gorean Protocol"},
      {name:"Serving Rituals (Gorean)",group:"Gorean Protocol"},
      {name:"Gorean Tea Service",group:"Gorean Protocol"},
      {name:"Silk System (white/red silk)",group:"Gorean Protocol"},
      {name:"Gorean Branding (kef mark)",group:"Gorean Protocol"},
      {name:"Collar of Consideration",group:"Gorean Protocol"},
      {name:"Collar of Ownership (Gorean)",group:"Gorean Protocol"},
      {name:"Gorean Training",group:"Gorean Protocol"},
      {name:"Slave Positions Training",group:"Gorean Protocol"},
      {name:"Total Power Exchange (Gorean style)",group:"Gorean Dynamics"},
      {name:"Gorean Master/slave relationship",group:"Gorean Dynamics"},
      {name:"Kajira Submission",group:"Gorean Dynamics"},
      {name:"Gorean Discipline",group:"Gorean Dynamics"},
      {name:"Living as Property (Gorean)",group:"Gorean Dynamics"},
      {name:"Gorean Philosophy Study",group:"Gorean Philosophy"},
      {name:"Natural Order concepts",group:"Gorean Philosophy"},
      {name:"Gorean Community Involvement",group:"Gorean Philosophy"},
      {name:"Online Gorean Roleplay",group:"Gorean Philosophy"},
    ]
  }
};

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let mode = null;
let activeCategory = 'ALL';
let activeFilter = 'All';
let ratingFilter = null;
let limitFilter = null;
let fetishFilter = false;
let selections     = {};
let searchOpen     = false;
let allSort = 'category';
let searchQuery    = '';

function emptyEntry() {
  return {experience:null, rating:null, limit:null, fetish:false, needs:[], notes:'', revisitDates:[]};
}
function buildDefaults() {
  const s = {};
  Object.entries(DATA).forEach(([cat,{items}]) => items.forEach((_,i) => { s[cat+'||'+i] = emptyEntry(); }));
  return s;
}
function groupItems(items) {
  const g = {};
  items.forEach((item,i) => { if (!g[item.group]) g[item.group]=[]; g[item.group].push({...item,idx:i}); });
  return g;
}
function completionPct(cat) {
  const items = DATA[cat].items;
  let f = 0;
  items.forEach((_,i) => { const s=selections[cat+'||'+i]; if(s&&(s.experience||s.limit||s.rating!=null)) f++; });
  return Math.round((f/items.length)*100);
}
function limitCls(label) { const found=LIMITS.find(l=>l.label===label); return found?found.cls:''; }
function getLimitColor(cls) { return {hard:'#EF4444',soft:'#F97316',cur:'#0891B2',enj:'#14B8A6',fav:'#F472B6'}[cls]||'#000'; }
function save() { if(mode==='profile') try{localStorage.setItem('ju_checklist',JSON.stringify(selections));}catch(e){} }
function load() { 
  try{ 
    const r=localStorage.getItem('ju_checklist'); 
    if(r){
      selections=JSON.parse(r);
      // Migrate old format (need) to new format (needs)
      Object.keys(selections).forEach(key => {
        if(selections[key].need && !selections[key].needs) {
          selections[key].needs = [selections[key].need];
          delete selections[key].need;
        }
        if(!selections[key].needs) selections[key].needs = [];
      });
      return;
    } 
  }catch(e){} 
  selections=buildDefaults(); 
}

// â”€â”€â”€ SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showIntroScreen() {
  document.getElementById('intro').style.display='flex';
  document.getElementById('header').style.display='none';
  document.getElementById('cat-nav').style.display='none';
  document.getElementById('search-bar').style.display='none';
  document.getElementById('legend-sticky').style.display='none';
  document.getElementById('all-items-view').style.display='none';
  document.getElementById('main').style.display='none';
  document.getElementById('print-view').style.display='none';
}
function showChecklist() {
  document.getElementById('intro').style.display='none';
  document.getElementById('header').style.display='flex';
  document.getElementById('cat-nav').style.display='block';
  document.getElementById('search-bar').style.display='block';
  document.getElementById('legend-sticky').style.display='block';
  document.getElementById('main').style.display='block';
  document.getElementById('print-view').style.display='none';
  document.getElementById('mode-badge').textContent = mode==='anonymous'?'ğŸ”’ Anonymous':'ğŸ’œ Profile';
  renderCatNav();
  renderLegend();
  renderMain();
}
function showPrint() {
  document.getElementById('intro').style.display='none';
  document.getElementById('header').style.display='none';
  document.getElementById('cat-nav').style.display='none';
  document.getElementById('search-bar').style.display='none';
  document.getElementById('legend-sticky').style.display='none';
  document.getElementById('all-items-view').style.display='none';
  document.getElementById('main').style.display='none';
  document.getElementById('print-view').style.display='block';
  renderPrint();
}
function hidePrint(){showChecklist();}
function goIntro(){showIntroScreen();}
function startMode(m){ mode=m; if(m==='profile'){load();}else{selections=buildDefaults();} showChecklist(); }

// â”€â”€â”€ INTRO LEGEND (one-time render) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function(){
  document.getElementById('intro-legend-body').innerHTML =
    '<strong>Experience:</strong> Never Tried Â· Tried Â· Versed<br>'+
    '<strong>Rating:</strong> '+RATINGS.map(r=>r.emoji+' '+r.value+'='+r.label).join(' Â· ')+'<br>'+
    '<strong>Limit:</strong> Hard Limit Â· Soft Limit Â· Curious Â· Enjoy Â· Favourite<br>'+
    '<strong>Fetish:</strong> Something you feel a deep pull toward<br>'+
    '<span style="color:#14B8A6;font-weight:600">ğŸ’š Need:</span> <em>What does this activity meet in you?</em> â€” the Journey Unbound layer';
})();

// â”€â”€â”€ NEEDS GUIDE MODAL (one-time render) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function(){
  document.getElementById('needs-grid').innerHTML = NVC_NEEDS.map(n=>
    '<div class="need-card"><div class="nc-label">'+n.label+'</div><div class="nc-desc">'+n.desc+'</div></div>'
  ).join('');
})();
function openNeedsGuide(){document.getElementById('needs-modal').style.display='flex';}
function closeNeedsGuide(e){if(!e||e.target===document.getElementById('needs-modal'))document.getElementById('needs-modal').style.display='none';}

// â”€â”€â”€ STICKY LEGEND (rendered once, stays static) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderLegend() {
  let h = '';
  // Ratings
  h += '<div class="legend-section"><span class="legend-lbl">Rating</span>';
  h += RATINGS.map(r=>'<span class="legend-rating'+(ratingFilter===r.value?' active':'')+'" onclick="toggleRatingFilter('+r.value+')" style="cursor:pointer"><span class="r-emoji">'+r.emoji+'</span><span class="r-label">'+r.label+'</span></span>').join('');
  h += '</div>';
  // divider
  h += '<div class="legend-divider"></div>';
  // Limits
  h += '<div class="legend-section"><span class="legend-lbl">Limit</span>';
  h += LIMITS.map(l=>'<span class="legend-limit'+(limitFilter===l.label?' active':'')+'" onclick="toggleLimitFilter(\''+l.label.replace(/'/g,"\\'")+'\')" style="cursor:pointer"><span class="swatch" style="background:'+getLimitColor(l.cls)+'"></span>'+l.label+'</span>').join('');
  h += '</div>';
  // divider
  h += '<div class="legend-divider"></div>';
  // Need
  h += '<div class="legend-need">ğŸ’š Need = what this meets in you</div>';
  // divider
  h += '<div class="legend-divider"></div>';
  // Fetish filter
  h += '<div class="legend-fetish'+(fetishFilter?' active':'')+'" onclick="toggleFetishFilter()">âœ¦ Fetish</div>';

  document.getElementById('legend-inner').innerHTML = h;
}


function toggleFetishFilter() {
  fetishFilter = !fetishFilter;
  renderLegend();
  if (activeCategory === 'ALL') {
    renderAllItems();
  } else {
    renderMain();
  }
}

function toggleRatingFilter(value) {
  ratingFilter = ratingFilter === value ? null : value;
  renderLegend();
  renderMain();
}

function toggleLimitFilter(label) {
  limitFilter = limitFilter === label ? null : label;
  renderLegend();
  renderMain();
}

// â”€â”€â”€ CATEGORY NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderCatNav() {
  let html = '';
  // Add ALL category first
  const allPct = Math.round((Object.values(selections).filter(s => s.experience || s.limit || s.rating != null).length / Object.values(selections).length) * 100);
  const allBadge = allPct > 0 ? '<span class="badge'+(allPct===100?' complete':'')+'">' + allPct+'%</span>' : '';
  html += '<button class="cat-btn'+(activeCategory==='ALL'?' active':'')+'" onclick="switchCat(\'ALL\')">ğŸ“‹ ALL' + allBadge + '</button>';
  
  // Add regular categories
  html += Object.keys(DATA).map(cat => {
    const pct = completionPct(cat);
    const badge = pct>0 ? '<span class="badge'+(pct===100?' complete':'')+'">' +pct+'%</span>' : '';
    return '<button class="cat-btn'+(cat===activeCategory?' active':'')+'" onclick="switchCat(\''+cat.replace(/'/g,"\\'")+'\')">' +DATA[cat].icon+' '+cat+badge+'</button>';
  }).join('');
  
  document.getElementById('cat-nav-inner').innerHTML = html;
}
function switchCat(cat){ 
  activeCategory=cat; 
  activeFilter='All'; 
  ratingFilter=null; 
  limitFilter=null; 
  fetishFilter=false;
  renderCatNav(); 
  renderLegend();
  if (cat === 'ALL') {
    document.getElementById('main').style.display='none';
    document.getElementById('all-items-view').style.display='block';
    renderAllItems();
  } else {
    document.getElementById('main').style.display='block';
    document.getElementById('all-items-view').style.display='none';
    renderMain();
  }
}

// â”€â”€â”€ MAIN RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderMain() {
  const cat = DATA[activeCategory];
  const groups = groupItems(cat.items);
  const groupNames = Object.keys(groups);

  document.getElementById('desc-card').textContent = cat.description;

  // filter pills
  const filterEl = document.getElementById('filter-row');
  if(groupNames.length>1){
    filterEl.innerHTML = ['All',...groupNames].map(g=>
      '<button class="filter-pill'+(activeFilter===g?' active':'')+'" onclick="setFilter(\''+g.replace(/'/g,"\\'")+'\')">' +g+'</button>'
    ).join('');
  } else { filterEl.innerHTML=''; }

  // items
  const filtered = activeFilter==='All' ? groups : {[activeFilter]:groups[activeFilter]};
  let html='';
  let totalDisplayed = 0;
  Object.entries(filtered).forEach(([group,gItems])=>{
    // Filter by rating and/or limit if active
    let displayItems = gItems;
    if (ratingFilter !== null || limitFilter !== null || fetishFilter) {
      displayItems = gItems.filter(item => {
        const key = activeCategory + '||' + item.idx;
        const s = selections[key] || emptyEntry();
        let matches = true;
        if (ratingFilter !== null && s.rating !== ratingFilter) matches = false;
        if (limitFilter !== null && s.limit !== limitFilter) matches = false;
        if (fetishFilter && !s.fetish) matches = false;
        return matches;
      });
    }
    if (displayItems.length > 0) {
      html += '<div class="group-heading">'+group+'</div>';
      displayItems.forEach(item=>{ html += renderItemCard(activeCategory, item.idx, item.name); });
      totalDisplayed += displayItems.length;
    }
  });
  if (totalDisplayed === 0 && (ratingFilter !== null || limitFilter !== null || fetishFilter)) {
    html = '<div style="text-align:center;padding:40px 20px;color:var(--muted);font-style:italic;">No items match the selected filters. Click the filter again to clear it.</div>';
  }
  document.getElementById('items-container').innerHTML = html;
  attachCardListeners();
}
function setFilter(g){ activeFilter=g; renderMain(); }

// â”€â”€â”€ ITEM CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function escHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

function renderItemCard(cat, idx, name, showCatBadge) {
  const key = cat+'||'+idx;
  const s   = selections[key] || emptyEntry();
  const needs = s.needs || []; // Handle both old (need) and new (needs) format
  const touched = s.experience||s.rating!=null||s.limit||s.fetish||needs.length>0;
  const borderStyle = touched && s.limit ? ' style="border-color:'+getLimitColor(limitCls(s.limit))+'"' : '';
  const tip = TIPS[name];
  const tipHtml = tip ? '<span class="tooltip">'+escHtml(tip)+'</span>' : '';
  const nameHtml = '<span class="item-name'+(tip?' has-tip':'')+'">'+escHtml(name)+'</span>' + (showCatBadge ? '<span class="cat-badge">'+escHtml(cat)+'</span>' : '');

  const expChips = EXPERIENCE.map(e=>'<button class="chip exp'+(s.experience===e?' on':'')+'" data-field="experience" data-value="'+e+'">'+e+'</button>').join('');
  const ratingBtns = RATINGS.map(r=>'<button class="rating-btn'+(s.rating===r.value?' on':'')+'" data-field="rating" data-value="'+r.value+'" title="'+r.label+'">'+r.emoji+'</button>').join('');
  const limitChips = LIMITS.map(l=>'<button class="chip limit '+l.cls+(s.limit===l.label?' on':'')+'" data-field="limit" data-value="'+l.label+'">'+l.label+'</button>').join('');
  // Choose needs list and label based on limit type
  let needsList = NVC_NEEDS;
  let needsLabel = 'What need does this meet?';
  
  if (s.limit === 'Hard Limit') {
    needsList = HARD_LIMIT_NEEDS;
    needsLabel = 'What need does honoring this boundary meet?';
  } else if (s.limit === 'Soft Limit') {
    // Soft limits get BOTH lists
    needsList = [...HARD_LIMIT_NEEDS, ...NVC_NEEDS];
    needsLabel = 'What needs does this boundary serve? What might I explore?';
  }
  
  const needChips = needsList.map(n=>'<button class="chip need'+(needs.includes(n.label)?' on':'')+'" data-field="need" data-value="'+n.label+'">'+n.label+'</button>').join('');
  const lastRevisit = s.revisitDates.length>0 ? 'Last revisited: '+s.revisitDates[s.revisitDates.length-1] : '';

  return `<div class="item-card${touched?' touched':''}" ${borderStyle} data-key="${key}">
    <div class="card-top">
      <div class="item-name-wrap">${nameHtml}${tipHtml}</div>
      <button class="fetish-btn${s.fetish?' on':''}" data-field="fetish">âœ¦ Fetish</button>
    </div>
    <div class="card-row">
      <div style="flex:1 1 160px"><div class="lbl-sm">Experience</div><div class="chip-strip">${expChips}</div></div>
      <div><div class="lbl-sm">Rating</div><div class="rating-strip">${ratingBtns}</div></div>
    </div>
    <div class="card-row"><div><div class="lbl-sm">Limit</div><div class="chip-strip">${limitChips}</div></div></div>
    <div class="card-row"><div><div class="lbl-sm need">${needsLabel}</div><div class="chip-strip">${needChips}</div></div></div>
    <div class="card-footer">
      <div style="flex:1 1 200px">
        <button class="notes-toggle" data-notes-toggle>+ Add a note</button>
        <input class="notes-input" style="display:none" data-notes-input placeholder="Your private thoughts..." value="${escHtml(s.notes)}">
      </div>
      <div class="revisit-area">
        <div class="revisit-date">${lastRevisit}</div>
        <button class="revisit-btn" data-revisit>ğŸ“… Mark Revisited</button>
      </div>
    </div>
  </div>`;
}

// â”€â”€â”€ CARD LISTENERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function attachCardListeners() {
  // cat badges in all-items view â€” click to jump to that category
  document.querySelectorAll('.cat-badge').forEach(badge => {
    badge.style.cursor = 'pointer';
    badge.addEventListener('click', (e) => {
      e.stopPropagation();
      const cat = badge.textContent;
      if (DATA[cat]) { activeCategory = cat; activeFilter = 'All'; closeSearch(); renderCatNav(); renderMain(); }
    });
  });

  document.querySelectorAll('.item-card').forEach(card => {
    const key = card.dataset.key;
    card.querySelectorAll('[data-field]').forEach(btn => {
      btn.addEventListener('click', () => {
        const field=btn.dataset.field, value=btn.dataset.value;
        if(field==='fetish') selections[key].fetish=!selections[key].fetish;
        else if(field==='rating'){ const n=parseInt(value); selections[key].rating=selections[key].rating===n?null:n; }
        else if(field==='need') {
          // Multi-select for needs
          if(!selections[key].needs) selections[key].needs = [];
          const idx = selections[key].needs.indexOf(value);
          if(idx > -1) selections[key].needs.splice(idx, 1);
          else selections[key].needs.push(value);
        }
        else selections[key][field]=selections[key][field]===value?null:value;
        save(); 
        if (activeCategory === 'ALL') {
          renderAllItems();
        } else {
          renderMain();
        }
      });
    });
    const nt=card.querySelector('[data-notes-toggle]'), ni=card.querySelector('[data-notes-input]');
    if(nt&&ni){
      nt.addEventListener('click',()=>{ const v=ni.style.display!=='none'; ni.style.display=v?'none':'block'; nt.textContent=v?'+ Add a note':'Hide notes'; if(!v)ni.focus(); });
      ni.addEventListener('input',()=>{ selections[key].notes=ni.value; save(); });
    }
    const rb=card.querySelector('[data-revisit]');
    if(rb) rb.addEventListener('click',()=>{ 
      selections[key].revisitDates.push(new Date().toISOString().slice(0,10)); 
      save(); 
      if (activeCategory === 'ALL') {
        renderAllItems();
      } else {
        renderMain();
      }
    });
  });
}

// â”€â”€â”€ PRINT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderPrint() {
  document.getElementById('print-legend').innerHTML = RATINGS.map(r=>'<span>'+r.emoji+' '+r.value+' = '+r.label+'</span>').join('');
  let html='';
  Object.entries(DATA).forEach(([cat,{icon,items}])=>{
    const groups=groupItems(items);
    html+='<div class="print-card"><div class="print-cat-header">'+icon+' '+cat+'</div>';
    html+='<table class="print-table"><thead><tr>';
    ['Activity','Exp.','Rating','Limit','Fetish','Need Met','Notes'].forEach(h=>html+='<th>'+h+'</th>');
    html+='</tr></thead><tbody>';
    Object.entries(groups).forEach(([group,gItems])=>{
      html+='<tr class="group-row"><td colspan="7">'+group+'</td></tr>';
      gItems.forEach(item=>{
        const s=selections[cat+'||'+item.idx]||emptyEntry();
        const rObj=RATINGS.find(r=>r.value===s.rating);
        const needs = (s.needs && s.needs.length > 0) ? s.needs.join(', ') : '';
        html+='<tr><td>'+escHtml(item.name)+'</td><td>'+(s.experience||'')+'</td><td>'+(rObj?rObj.emoji+' '+rObj.value:'')+'</td><td style="'+(s.limit?'color:'+getLimitColor(limitCls(s.limit))+';font-weight:600':'')+'">'+(s.limit||'')+'</td><td>'+(s.fetish?'âœ“':'')+'</td><td class="need-cell">'+needs+'</td><td class="notes-cell">'+(escHtml(s.notes)||'')+'</td></tr>';
      });
    });
    html+='</tbody></table></div>';
  });
  document.getElementById('print-body').innerHTML=html;
}


// â”€â”€â”€ SEARCH & ALL ITEMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Build a flat index of every item with its category attached
function buildIndex() {
  const idx = [];
  Object.entries(DATA).forEach(([cat, {icon, items}]) => {
    items.forEach((item, i) => {
      idx.push({ cat, icon, idx: i, name: item.name, group: item.group, key: cat+'||'+i });
    });
  });
  return idx;
}
const ITEM_INDEX = buildIndex();

function openSearch() {
  // switch to all-items view
  document.getElementById('cat-nav').style.display = 'none';
  document.getElementById('legend-sticky').style.display = 'none';
  document.getElementById('main').style.display = 'none';
  document.getElementById('all-items-view').style.display = 'block';
  document.getElementById('search-input').focus();
  renderAllItems();
}

function closeSearch() {
  document.getElementById('cat-nav').style.display = 'block';
  document.getElementById('legend-sticky').style.display = 'block';
  document.getElementById('main').style.display = 'block';
  document.getElementById('all-items-view').style.display = 'none';
  document.getElementById('search-input').value = '';
  searchQuery = '';
  document.getElementById('search-clear-btn').classList.remove('visible');
}

function onSearchInput() {
  searchQuery = document.getElementById('search-input').value.trim().toLowerCase();
  document.getElementById('search-clear-btn').classList.toggle('visible', searchQuery.length > 0);
  // if we're not already in all-items view, switch to it
  if (document.getElementById('all-items-view').style.display !== 'block') {
    openSearch();
  }
  renderAllItems();
}

function clearSearch() {
  document.getElementById('search-input').value = '';
  searchQuery = '';
  document.getElementById('search-clear-btn').classList.remove('visible');
  renderAllItems();
}

function setAllSort(s) {
  allSort = s;
  document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('sort-' + s).classList.add('active');
  renderAllItems();
}

function renderAllItems() {
  let items = [...ITEM_INDEX];

  // filter by search
  if (searchQuery) {
    const q = searchQuery;
    // Simple stemming: remove common suffixes to catch variations
    const stem = (word) => {
      return word.replace(/(?:ing|ed|s|er|ly)$/, '');
    }

  // Apply rating, limit, and fetish filters
  if (ratingFilter !== null || limitFilter !== null || fetishFilter) {
    items = items.filter(item => {
      const s = selections[item.key] || emptyEntry();
      let matches = true;
      if (ratingFilter !== null && s.rating !== ratingFilter) matches = false;
      if (limitFilter !== null && s.limit !== limitFilter) matches = false;
      if (fetishFilter && !s.fetish) matches = false;
      return matches;
    });
  };
    const qStem = stem(q);
    
    items = items.filter(item => {
      const name = item.name.toLowerCase();
      const cat = item.cat.toLowerCase();
      const group = item.group.toLowerCase();
      const tip = (TIPS[item.name] || '').toLowerCase();
      
      // Direct match
      if (name.includes(q) || cat.includes(q) || group.includes(q) || tip.includes(q)) {
        return true;
      }
      
      // Stemmed match for variations
      const nameStem = stem(name);
      const catStem = stem(cat);
      const groupStem = stem(group);
      const tipStem = stem(tip);
      
      return nameStem.includes(qStem) || catStem.includes(qStem) || 
             groupStem.includes(qStem) || tipStem.includes(qStem);
    });
  }

  // sort
  if (allSort === 'alpha') {
    items.sort((a, b) => a.name.localeCompare(b.name));
  } else if (allSort === 'category') {
    const catOrder = Object.keys(DATA);
    items.sort((a, b) => {
      const ci = catOrder.indexOf(a.cat) - catOrder.indexOf(b.cat);
      if (ci !== 0) return ci;
      return a.name.localeCompare(b.name);
    });
  } else if (allSort === 'rated') {
    items.sort((a, b) => {
      const sa = selections[a.key] || emptyEntry();
      const sb = selections[b.key] || emptyEntry();
      const aHas = sa.rating != null || sa.experience || sa.limit ? 1 : 0;
      const bHas = sb.rating != null || sb.experience || sb.limit ? 1 : 0;
      if (aHas !== bHas) return bHas - aHas; // rated first
      return a.name.localeCompare(b.name);
    });
  }

  // count
  document.getElementById('all-results-count').textContent = items.length + ' item' + (items.length !== 1 ? 's' : '');

  // render
  if (items.length === 0) {
    document.getElementById('all-items-list').innerHTML = '<div class="no-results">Nothing found for "' + escHtml(searchQuery) + '"<br><small>Try a shorter or different term</small></div>';
    return;
  }

  let html = '';
  let lastCat = null;
  items.forEach(item => {
    // if sorted by category, show a group heading when cat changes
    if (allSort === 'category' && item.cat !== lastCat) {
      html += '<div class="group-heading">' + item.icon + ' ' + escHtml(item.cat) + '</div>';
      lastCat = item.cat;
    }
    html += renderItemCard(item.cat, item.idx, item.name, true);
  });
  document.getElementById('all-items-list').innerHTML = html;
  attachCardListeners();
}


// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
showIntroScreen();
</script>
</body>
</html>
